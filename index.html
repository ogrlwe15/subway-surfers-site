<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Subway Surfers by Mynvo - √âdition 2025 Compl√®te</title>
  <meta name="description" content="Jouez √† Subway Surfers 2025 version Mynvo avec tous les personnages d√©bloqu√©s, ZQSD, Timer, FPS et plus encore!">
  <style>
    :root {
      --primary: #7c62dc;
      --primary-dark: #6a50c9;
      --primary-light: #9580e8;
      --primary-transparent: rgba(124, 98, 220, 0.15);
      --bg-dark: #0a0a0a;
      --bg-card: rgba(30, 30, 40, 0.8);
      --text-light: #f0f0f0;
      --text-muted: #aaa;
      --success: #00cc66;
      --danger: #ff4444;
      --warning: #ffaa00;
    }
    
    /* Th√®me Blanc */
    .theme-white {
      --primary: #4a6fa5;
      --primary-dark: #3a5a85;
      --primary-light: #6b8cc0;
      --primary-transparent: rgba(74, 111, 165, 0.15);
      --bg-dark: #f5f5f5;
      --bg-card: rgba(255, 255, 255, 0.9);
      --text-light: #333333;
      --text-muted: #666666;
      --success: #28a745;
      --danger: #dc3545;
      --warning: #ffc107;
    }
    
    /* Th√®me Sombre */
    .theme-dark {
      --primary: #333333;
      --primary-dark: #222222;
      --primary-light: #444444;
      --primary-transparent: rgba(51, 51, 51, 0.15);
      --bg-dark: #000000;
      --bg-card: rgba(20, 20, 20, 0.9);
      --text-light: #f0f0f0;
      --text-muted: #aaaaaa;
      --success: #00cc66;
      --danger: #ff4444;
      --warning: #ffaa00;
    }
    
    /* Th√®me Rouge */
    .theme-red {
      --primary: #dc3545;
      --primary-dark: #c82333;
      --primary-light: #e4606d;
      --primary-transparent: rgba(220, 53, 69, 0.15);
      --bg-dark: #1a0a0a;
      --bg-card: rgba(40, 20, 20, 0.8);
      --text-light: #f0f0f0;
      --text-muted: #ccaaaa;
      --success: #28a745;
      --danger: #dc3545;
      --warning: #ffc107;
    }
    
    /* Th√®me Vert */
    .theme-green {
      --primary: #28a745;
      --primary-dark: #218838;
      --primary-light: #4cbb6b;
      --primary-transparent: rgba(40, 167, 69, 0.15);
      --bg-dark: #0a1a0a;
      --bg-card: rgba(20, 40, 20, 0.8);
      --text-light: #f0f0f0;
      --text-muted: #aaccaa;
      --success: #28a745;
      --danger: #dc3545;
      --warning: #ffc107;
    }
    
    /* Th√®me Bleu */
    .theme-blue {
      --primary: #007bff;
      --primary-dark: #0069d9;
      --primary-light: #4d9fff;
      --primary-transparent: rgba(0, 123, 255, 0.15);
      --bg-dark: #0a0a1a;
      --bg-card: rgba(20, 20, 40, 0.8);
      --text-light: #f0f0f0;
      --text-muted: #aaaacc;
      --success: #28a745;
      --danger: #dc3545;
      --warning: #ffc107;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: linear-gradient(135deg, var(--bg-dark) 0%, #1a1a2e 100%);
      color: var(--text-light);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      overflow-x: hidden;
      transition: all 0.3s ease;
    }
    
    /* Header */
    header {
      background: var(--primary-transparent);
      backdrop-filter: blur(12px);
      padding: 18px 40px;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      border-bottom: 2px solid var(--primary);
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
    }
    
    .header-content {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .logo {
      font-size: 34px;
      font-weight: 900;
      display: flex;
      align-items: center;
      gap: 14px;
    }
    
    .logo img {
      height: 50px;
      width: 50px;
      border-radius: 50%;
      border: 4px solid var(--primary);
      box-shadow: 0 0 20px var(--primary-transparent);
      object-fit: cover;
    }
    
    .logo span {
      color: var(--primary);
      text-shadow: 0 0 10px rgba(124, 98, 220, 0.5);
    }
    
    .nav-links {
      display: flex;
      align-items: center;
    }
    
    .nav-links a {
      color: var(--text-light);
      text-decoration: none;
      margin-left: 24px;
      font-weight: 600;
      font-size: 17px;
      transition: 0.2s;
      cursor: pointer;
      position: relative;
      padding: 8px 0;
    }
    
    .nav-links a:hover {
      color: var(--primary);
    }
    
    .nav-links a::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--primary);
      transition: width 0.3s;
    }
    
    .nav-links a:hover::after {
      width: 100%;
    }
    
    /* Main content */
    main {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 120px 20px 40px;
    }
    
    .game-container {
      width: 100%;
      max-width: 1350px;
      background: var(--bg-card);
      backdrop-filter: blur(20px);
      border-radius: 28px;
      padding: 40px;
      box-shadow: 0 25px 80px var(--primary-transparent);
      overflow: hidden;
      position: relative;
      border: 2px solid var(--primary);
      animation: containerGlow 4s infinite alternate;
    }
    
    @keyframes containerGlow {
      0% { box-shadow: 0 25px 80px var(--primary-transparent); }
      100% { box-shadow: 0 25px 80px var(--primary-transparent); }
    }
    
    .game-frame {
      position: relative;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 15px 50px var(--primary-transparent);
      border: 2px solid var(--primary);
    }
    
    iframe {
      width: 100%;
      height: 720px;
      border: none;
      background: #000000;
      display: block;
    }
    
    .loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 10;
      text-align: center;
      background: rgba(0, 0, 0, 0.8);
      padding: 30px;
      border-radius: 15px;
      border: 2px solid var(--primary);
    }
    
    .spinner {
      width: 70px;
      height: 70px;
      border: 8px solid #ffffff33;
      border-top: 8px solid var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    footer {
      text-align: center;
      padding: 25px;
      font-size: 15px;
      opacity: 0.85;
      background: var(--primary-transparent);
      color: var(--primary);
    }
    
    .fs-button {
      position: absolute;
      top: 18px;
      right: 18px;
      z-index: 200;
      background: rgba(0, 0, 0, 0.8);
      border: 2px solid var(--primary);
      color: #fff;
      padding: 10px 14px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 700;
      transition: all 0.3s;
    }
    
    .fs-button:hover {
      background: var(--primary);
      color: #000;
      transform: scale(1.05);
    }
    
    /* ========== OVERLAYS FIXES ========== */
    
    /* FPS Counter */
    #fps-overlay {
      position: fixed;
      top: 100px;
      left: 20px;
      z-index: 2147483647;
      background: rgba(0, 0, 0, 0.95);
      color: var(--primary);
      padding: 10px 18px;
      border-radius: 12px;
      font-size: 18px;
      font-weight: 700;
      border: 2px solid var(--primary);
      box-shadow: 0 0 20px var(--primary-transparent);
      font-family: system-ui, sans-serif;
      pointer-events: none;
      display: none;
      cursor: move;
    }
    
    /* TOP 3 */
    #top3-overlay {
      position: fixed;
      bottom: 20px;
      left: 20px;
      z-index: 2147483647;
      background: rgba(0, 0, 0, 0.98);
      color: #fff;
      padding: 16px 22px;
      border-radius: 14px;
      border: 2px solid var(--primary);
      font-size: 14px;
      line-height: 1.6;
      box-shadow: 0 0 30px var(--primary-transparent);
      font-family: system-ui, sans-serif;
      pointer-events: none;
      min-width: 280px;
      backdrop-filter: blur(10px);
      cursor: move;
    }
    
    #top3-overlay .title {
      color: var(--primary);
      font-size: 16px;
      font-weight: 900;
      margin-bottom: 10px;
      text-align: center;
    }
    
    #top3-overlay .player {
      margin: 6px 0;
      padding: 6px;
      border-radius: 8px;
      background: var(--primary-transparent);
    }
    
    #top3-overlay .player.first {
      color: var(--primary);
      font-weight: 700;
      font-size: 15px;
      background: var(--primary-transparent);
    }
    
    /* Nouveau Timer Overlay */
    #speedrun-timer-overlay {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 2147483647;
      display: none;
      user-select: none;
      background: rgba(0, 0, 0, 0.9);
      border: 3px solid var(--primary);
      border-radius: 15px;
      padding: 15px 25px;
      box-shadow: 0 0 30px var(--primary-transparent);
      font-family: 'Courier New', monospace;
      backdrop-filter: blur(10px);
      min-width: 200px;
      cursor: move;
    }
    
    #timer-display {
      font-weight: bold;
      font-size: 32px;
      color: var(--primary);
      text-align: center;
      letter-spacing: 2px;
      text-shadow: 0 0 10px var(--primary-transparent);
    }
    
    /* Bottom Menu */
    #bottom-menu {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(0, 0, 0, 0.95);
      border: 2px solid var(--primary);
      border-radius: 14px;
      padding: 14px 18px;
      z-index: 999999;
      color: #fff;
      font-family: 'Segoe UI', sans-serif;
      min-width: 260px;
      box-shadow: 0 0 25px var(--primary-transparent);
      backdrop-filter: blur(10px);
      display: none;
    }
    
    #bottom-menu.visible {
      display: block;
    }
    
    .quick-btn {
      width: 100%;
      padding: 10px 12px;
      background: #111;
      border: 2px solid var(--primary);
      border-radius: 10px;
      color: #fff;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.15s;
      margin-top: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .quick-btn:hover {
      background: var(--primary);
      color: #000;
      transform: translateX(5px);
    }
    
    .give-piece-btn {
      background: linear-gradient(135deg, #ffd700, #ffaa00);
      color: #000;
      border: none;
    }
    
    .give-piece-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 30px rgba(255, 215, 0, 0.6);
    }
    
    /* Modal */
    .mynvo-modal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: var(--bg-card);
      color: var(--text-light);
      padding: 24px;
      border-radius: 16px;
      border: 4px solid var(--primary);
      z-index: 100000;
      max-width: 92%;
      width: 720px;
      box-shadow: 0 0 60px var(--primary-transparent);
      backdrop-filter: blur(15px);
      animation: modalAppear 0.3s ease-out;
      max-height: 90vh;
      overflow-y: auto;
    }
    
    @keyframes modalAppear {
      0% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.9);
      }
      100% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }
    }
    
    .settings-section {
      background: rgba(20, 20, 30, 0.7);
      padding: 16px;
      border-radius: 12px;
      margin-bottom: 16px;
      border: 1px solid var(--primary-transparent);
    }
    
    .settings-section h3 {
      color: var(--primary);
      margin-bottom: 12px;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .mynvo-row {
      display: flex;
      gap: 12px;
      align-items: center;
      margin-bottom: 12px;
    }
    
    .mynvo-label {
      min-width: 120px;
      color: var(--text-muted);
    }
    
    .key-display {
      display: inline-block;
      min-width: 50px;
      padding: 10px 16px;
      background: var(--bg-dark);
      border: 2px solid var(--primary);
      border-radius: 8px;
      text-align: center;
      font-weight: 700;
      font-size: 18px;
      cursor: pointer;
      transition: 0.2s;
    }
    
    .key-display:hover {
      border-color: var(--primary-light);
      background: #1a1a1a;
    }
    
    .key-display.active {
      border-color: var(--success);
      background: #1a4d1a;
      animation: pulse 0.5s;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    /* Notification am√©lior√©e */
    .notification {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--bg-card);
      color: var(--text-light);
      padding: 12px 20px;
      border-radius: 8px;
      border-left: 4px solid var(--primary);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      z-index: 100001;
      display: flex;
      align-items: center;
      gap: 10px;
      opacity: 0;
      transition: opacity 0.3s;
      max-width: 500px;
      text-align: center;
      line-height: 1.4;
    }
    
    .notification.show {
      opacity: 1;
    }
    
    .notification.multiline {
      padding: 15px 20px;
      text-align: left;
    }
    
    /* Particules */
    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
    }
    
    .particle {
      position: absolute;
      background: var(--primary-transparent);
      border-radius: 50%;
      animation: float 15s infinite linear;
    }
    
    @keyframes float {
      0% {
        transform: translateY(0) translateX(0);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(-100vh) translateX(100px);
        opacity: 0;
      }
    }
    
    /* Nouveaux styles pour la configuration am√©lior√©e */
    .settings-tabs {
      display: flex;
      margin-bottom: 20px;
      border-bottom: 2px solid var(--primary);
      flex-wrap: wrap;
    }
    
    .settings-tab {
      padding: 10px 20px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s;
      border-bottom: 3px solid transparent;
    }
    
    .settings-tab.active {
      color: var(--primary);
      border-bottom: 3px solid var(--primary);
    }
    
    .settings-tab-content {
      display: none;
    }
    
    .settings-tab-content.active {
      display: block;
    }
    
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 24px;
    }
    
    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #333;
      transition: .4s;
      border-radius: 24px;
    }
    
    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 16px;
      width: 16px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    
    input:checked + .toggle-slider {
      background-color: var(--primary);
    }
    
    input:checked + .toggle-slider:before {
      transform: translateX(26px);
    }
    
    .slider-container {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .size-slider {
      width: 150px;
    }
    
    /* Th√®mes */
    .theme-options {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-top: 10px;
    }
    
    .theme-option {
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
      text-align: center;
      border: 2px solid transparent;
      transition: all 0.3s;
    }
    
    .theme-option.active {
      border-color: var(--primary);
      transform: scale(1.05);
    }
    
    .theme-option.violet {
      background: linear-gradient(135deg, #7c62dc, #6a50c9);
      color: white;
    }
    
    .theme-option.white {
      background: linear-gradient(135deg, #f5f5f5, #e0e0e0);
      color: #333;
    }
    
    .theme-option.dark {
      background: linear-gradient(135deg, #333, #222);
      color: white;
    }
    
    .theme-option.red {
      background: linear-gradient(135deg, #dc3545, #c82333);
      color: white;
    }
    
    .theme-option.green {
      background: linear-gradient(135deg, #28a745, #218838);
      color: white;
    }
    
    .theme-option.blue {
      background: linear-gradient(135deg, #007bff, #0069d9);
      color: white;
    }
    
    /* Responsive */
    @media (max-width: 1200px) {
      .game-container { padding: 30px; }
      iframe { height: 600px; }
    }
    
    @media (max-width: 768px) {
      header { padding: 14px 20px; }
      .logo { font-size: 24px; }
      .logo img { height: 40px; width: 40px; }
      .nav-links a { margin-left: 16px; font-size: 15px; }
      .game-container { padding: 20px; }
      iframe { height: 400px; }
      #bottom-menu { min-width: 240px; right: 10px; bottom: 10px; }
      .settings-tabs { flex-direction: column; }
      .theme-options { grid-template-columns: repeat(2, 1fr); }
    }
    
    @media (max-width: 480px) {
      .header-content { flex-direction: column; gap: 10px; }
      .nav-links { width: 100%; justify-content: center; }
      .nav-links a { margin: 0 10px; }
      iframe { height: 300px; }
      .mynvo-modal { width: 95%; padding: 15px; }
      .theme-options { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body class="theme-violet">
  <!-- Particules d'arri√®re-plan -->
  <div class="particles" id="particles-container"></div>

  <header>
    <div class="header-content">
      <div class="logo">
        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiByeD0iMjUiIGZpbGw9IiM3QzYyREMiLz4KPHBhdGggZD0iTTE1IDM1TDM1IDM1TDM1IDMwTDE1IDMwTDE1IDM1WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTE1IDI1TDM1IDI1TDM1IDIwTDE1IDIwTDE1IDI1WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTE1IDE1TDM1IDE1TDM1IDEwTDE1IDEwTDE1IDE1WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+" alt="Mynvo">
        Subway<span>Surfers</span> by <span>Mynvo</span>
      </div>
      <div class="nav-links">
        <a id="play-link">Jouer</a>
        <a id="settings-link">Param√®tres</a>
        <a href="https://discord.gg/bQTtDXmF" target="_blank">Discord</a>
      </div>
    </div>
  </header>

  <main>
    <div class="game-container">
      <div class="game-frame">
        <div class="loading" id="loading-ui">
          <div class="spinner"></div>
          <p>Chargement du jeu Subway Surfers 2025...</p>
        </div>
        <button class="fs-button" id="fs-btn" title="Plein √©cran">‚§¢ Plein √©cran</button>
        <!-- Jeu Subway Surfers fonctionnel -->
        <iframe id="game-iframe" src="./game/index.html" allowfullscreen allow="autoplay; fullscreen *"></iframe>
      </div>
    </div>
  </main>

  <!-- FPS Counter -->
  <div id="fps-overlay">üéÆ FPS: <span id="fps-value">60</span></div>

  <!-- TOP 3 -->
  <div id="top3-overlay">
    <div class="title">üèÜ TOP 3 NO COIN</div>
    <div class="player first">ü•á Mynvo ‚Äì 13:27</div>
    <div class="player">ü•à Le_A ‚Äì 11:51</div>
    <div class="player">ü•â Dimitri ‚Äì 8:12</div>
  </div>

  <!-- Nouveau Timer Speedrun -->
  <div id="speedrun-timer-overlay">
    <div id="timer-display">00:00.00</div>
  </div>

  <!-- Bottom Menu -->
  <div id="bottom-menu">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
      <div style="font-size:16px;font-weight:700;color:var(--primary);">‚öôÔ∏è Menu rapide</div>
      <button id="close-bottom-menu" style="background:var(--primary);border:none;color:#000;font-weight:700;border-radius:8px;padding:4px 10px;cursor:pointer;">‚úñ</button>
    </div>

    <button class="quick-btn" id="settings-quick-btn">üéÆ Configuration compl√®te</button>
    <button class="quick-btn" id="timer-quick-btn">‚è±Ô∏è Timer Speedrun</button>
    <button class="quick-btn" id="fps-quick-btn">üìä FPS (afficher/masquer)</button>
    <button class="quick-btn" id="fullscreen-quick-btn">‚§¢ Plein √©cran</button>
    <button class="quick-btn" id="top3-quick-btn">üèÜ TOP 3 (afficher/masquer)</button>
    <button class="quick-btn give-piece-btn" id="unlock-all-btn">üîì D√©bloquer Tout (100%)</button>
  </div>

  <footer>Subway Surfers 2025 by Mynvo ¬© 2025 - Tous droits r√©serv√©s</footer>

  <script>
    console.log('%c[MYNVO] Syst√®me d\'extension int√©gr√© activ√©!', 'color: #7c62dc; font-weight: bold; font-size: 14px;');
    
    // ============= CONFIGURATION AM√âLIOR√âE =============
    let config = {
      customKeys: {
        up: "z",
        down: "s",
        left: "q",
        right: "d",
        hoverboard: " "
      },
      timerStartKey: "t",
      timerPauseKey: " ",
      timerResetKey: "r",
      showFPS: true,
      showTop3: true,
      showTimer: false,
      fullscreenKeepOverlays: true,
      theme: "violet",
      overlaySizes: {
        fps: 1.0,
        top3: 1.0,
        timer: 1.0
      },
      overlayPositions: {
        fps: { top: "100px", left: "20px" },
        top3: { bottom: "20px", left: "20px" },
        timer: { top: "20px", right: "20px" }
      }
    };

    // ============= VARIABLES GLOBALES =============
    const iframe = document.getElementById('game-iframe');
    const loadingUI = document.getElementById('loading-ui');
    const timerOverlay = document.getElementById('speedrun-timer-overlay');
    const timerDisplay = document.getElementById('timer-display');
    
    let zqsdActive = true;
    let isSettingKey = false;
    let currentKeySetting = null;
    let isDragging = false;
    let currentDraggedElement = null;
    let dragOffset = { x: 0, y: 0 };
    
    // Variables Timer am√©lior√©es
    let timerState = 'stopped';
    let timerStartTime = null;
    let timerCurrentTime = 0;
    let timerInterval = null;
    let timerVisible = false;

    // ============= CHARGEMENT DE LA PAGE =============
    iframe.addEventListener('load', function() {
      console.log('‚úÖ Iframe charg√©e');
      hideLoading();
      setTimeout(initializeExtensionFeatures, 1500);
    });

    // Fallback si l'iframe ne charge pas
    setTimeout(function() {
      if (loadingUI.style.display !== 'none') {
        hideLoading();
        showNotification('üéÆ Jeu charg√©! Utilisez ZQSD + ESPACE pour jouer.', 'success', true);
      }
    }, 3000);

    function hideLoading() {
      if (loadingUI.style.display !== 'none') {
        loadingUI.style.display = 'none';
      }
    }

    // ============= SYST√àME ZQSD CORRIG√â =============
    function setupZQSDSystem() {
      console.log('üéÆ Activation du syst√®me ZQSD corrig√©...');
      
      document.removeEventListener('keydown', handleZQSDKeyDown);
      document.removeEventListener('keyup', handleZQSDKeyUp);
      
      document.addEventListener('keydown', handleZQSDKeyDown, true);
      document.addEventListener('keyup', handleZQSDKeyUp, true);
    }

    function handleZQSDKeyDown(e) {
      if (!zqsdActive || e.repeat || isSettingKey) return;
      
      const key = e.key.toLowerCase();
      const mappedKey = getKeyMapping(key);
      
      if (mappedKey) {
        e.preventDefault();
        e.stopPropagation();
        e.stopImmediatePropagation();
        
        console.log(`üéÆ Touche ZQSD: ${key} -> ${mappedKey.key}`);
        dispatchMappedKey(mappedKey, 'keydown');
      }
    }

    function handleZQSDKeyUp(e) {
      if (!zqsdActive || isSettingKey) return;
      
      const key = e.key.toLowerCase();
      const mappedKey = getKeyMapping(key);
      
      if (mappedKey) {
        e.preventDefault();
        e.stopPropagation();
        e.stopImmediatePropagation();
        
        dispatchMappedKey(mappedKey, 'keyup');
      }
    }

    function getKeyMapping(key) {
      const keyMap = {
        [config.customKeys.up]: { key: 'ArrowUp', code: 'ArrowUp', keyCode: 38 },
        [config.customKeys.down]: { key: 'ArrowDown', code: 'ArrowDown', keyCode: 40 },
        [config.customKeys.left]: { key: 'ArrowLeft', code: 'ArrowLeft', keyCode: 37 },
        [config.customKeys.right]: { key: 'ArrowRight', code: 'ArrowRight', keyCode: 39 },
        [config.customKeys.hoverboard]: { key: ' ', code: 'Space', keyCode: 32 }
      };
      
      return keyMap[key] || null;
    }

    function dispatchMappedKey(mappedKey, eventType) {
      try {
        const event = new KeyboardEvent(eventType, {
          key: mappedKey.key,
          code: mappedKey.code,
          keyCode: mappedKey.keyCode,
          which: mappedKey.keyCode,
          bubbles: true,
          cancelable: true,
          composed: true
        });
        
        if (iframe.contentWindow) {
          iframe.contentWindow.dispatchEvent(event);
        }
        if (iframe.contentDocument) {
          iframe.contentDocument.dispatchEvent(event);
          iframe.contentDocument.documentElement?.dispatchEvent(event);
        }
        
        iframe.contentWindow?.postMessage({
          type: 'keyboard_event',
          eventType: eventType,
          key: mappedKey.key,
          code: mappedKey.code,
          keyCode: mappedKey.keyCode
        }, '*');
        
      } catch (err) {
        console.log('Dispatch key error:', err);
      }
    }

    // ============= TIMER SPEEDRUN CORRIG√â =============
    function setupTimerSystem() {
      document.addEventListener('keydown', handleTimerKeyDown, true);
    }

    function handleTimerKeyDown(e) {
      if (e.repeat || isSettingKey) return;
      
      const key = e.key.toLowerCase();
      
      if (key === config.timerStartKey.toLowerCase() && !e.ctrlKey && !e.altKey && !e.metaKey && !e.shiftKey) {
        e.preventDefault();
        e.stopPropagation();
        startTimer();
      } 
      else if (key === config.timerPauseKey.toLowerCase() && !e.ctrlKey && !e.altKey && !e.metaKey && !e.shiftKey) {
        e.preventDefault();
        e.stopPropagation();
        pauseTimer();
      }
      else if (key === config.timerResetKey.toLowerCase() && !e.ctrlKey && !e.altKey && !e.metaKey && !e.shiftKey) {
        e.preventDefault();
        e.stopPropagation();
        resetTimer();
      }
    }

    function startTimer() {
      if (!timerVisible) return;
      
      if (timerState === 'stopped' || timerState === 'paused') {
        timerStartTime = performance.now() - timerCurrentTime;
        timerState = 'running';
        updateTimerDisplay();
        
        const updateFrame = () => {
          if (timerState === 'running') {
            updateTimerDisplay();
            timerInterval = requestAnimationFrame(updateFrame);
          }
        };
        timerInterval = requestAnimationFrame(updateFrame);
      }
    }

    function pauseTimer() {
      if (!timerVisible || timerState !== 'running') return;
      
      cancelAnimationFrame(timerInterval);
      timerState = 'paused';
    }

    function resetTimer() {
      if (!timerVisible) return;
      
      cancelAnimationFrame(timerInterval);
      timerState = 'stopped';
      timerCurrentTime = 0;
      timerDisplay.textContent = '00:00.00';
    }

    function updateTimerDisplay() {
      if (!timerVisible || timerState !== 'running') return;
      
      timerCurrentTime = performance.now() - timerStartTime;
      timerDisplay.textContent = formatTime(timerCurrentTime);
    }

    function formatTime(ms) {
      const totalSec = Math.floor(ms / 1000);
      const m = Math.floor(totalSec / 60);
      const s = totalSec % 60;
      const cs = Math.floor((ms % 1000) / 10);
      
      return `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}.${cs.toString().padStart(2, '0')}`;
    }

    function toggleTimerVisibility() {
      config.showTimer = !config.showTimer;
      timerOverlay.style.display = config.showTimer ? 'block' : 'none';
      timerVisible = config.showTimer;
      
      if (config.showTimer) {
        updateTimerDisplay();
      }
      
      saveConfig();
    }

    // ============= D√âBLOCAGE COMPLET CORRIG√â =============
    function unlockAllCharacters() {
      console.log('üîì D√©blocage COMPLET activ√©...');
      
      // Injection du script de triche
      const cheatScript = `
        // MYNVO CHEAT SYSTEM - TOUT D√âBLOQU√â
        console.log('üéÆ MYNVO CHEAT: Activation des triches...');
        
        // Pi√®ces illimit√©es
        if (typeof Game !== 'undefined') {
          Game.currency = 999999;
          Game.coins = 999999;
          console.log('üí∞ MYNVO: 999,999 pi√®ces ajout√©es!');
        }
        
        // D√©bloquer personnages
        if (typeof characterManager !== 'undefined') {
          characterManager.unlockAllCharacters();
          console.log('üé≠ MYNVO: Tous les personnages d√©bloqu√©s!');
        }
        
        // Score boost
        if (typeof score !== 'undefined') {
          score.multiplier = 10;
          console.log('‚≠ê MYNVO: Multiplicateur x10 activ√©!');
        }
        
        // Power-ups illimit√©s
        if (typeof powerups !== 'undefined') {
          powerups.jetpack = 99;
          powerups.superSneakers = 99;
          powerups.coinMagnet = 99;
          powerups.boost = 99;
          console.log('‚ö° MYNVO: Power-ups illimit√©s!');
        }
        
        // Fonction globale MYNVO
        window.MYNVO_CHEATS = {
          unlockAll: function() {
            Game.currency = 999999;
            Game.coins = 999999;
            if (characterManager) characterManager.unlockAllCharacters();
            console.log('üéÆ MYNVO: TOUT D√âBLOQU√â!');
          }
        };
        
        MYNVO_CHEATS.unlockAll();
      `;
      
      try {
        // Injection directe
        iframe.contentWindow.eval(cheatScript);
        showNotification('üéâ TOUT EST D√âBLOQU√â! 999,999 pi√®ces - Personnages - Power-ups!', 'success', true);
      } catch (error) {
        console.log('Injection directe √©chou√©e, m√©thode alternative...');
        
        // M√©thode alternative
        const scriptElement = document.createElement('script');
        scriptElement.textContent = cheatScript;
        iframe.contentDocument.head.appendChild(scriptElement);
        showNotification('üéâ Triches activ√©es avec succ√®s!', 'success', true);
      }
    }

    // ============= FPS COUNTER =============
    let fpsFrames = 0;
    let fpsLastTime = performance.now();
    
    function updateFPS() {
      fpsFrames++;
      const now = performance.now();
      
      if (now - fpsLastTime >= 1000) {
        const fps = Math.round((fpsFrames * 1000) / (now - fpsLastTime));
        document.getElementById('fps-value').textContent = fps;
        
        fpsFrames = 0;
        fpsLastTime = now;
      }
      
      requestAnimationFrame(updateFPS);
    }
    updateFPS();

    function toggleFPS() {
      config.showFPS = !config.showFPS;
      document.getElementById('fps-overlay').style.display = config.showFPS ? 'block' : 'none';
      saveConfig();
    }

    function toggleTop3() {
      config.showTop3 = !config.showTop3;
      document.getElementById('top3-overlay').style.display = config.showTop3 ? 'block' : 'none';
      saveConfig();
    }

    // ============= PLEIN √âCRAN =============
    function toggleFullscreen() {
      const gameFrame = document.querySelector('.game-frame');
      
      if (!document.fullscreenElement) {
        if (gameFrame.requestFullscreen) {
          gameFrame.requestFullscreen();
        } else if (gameFrame.webkitRequestFullscreen) {
          gameFrame.webkitRequestFullscreen();
        }
      } else {
        document.exitFullscreen();
      }
    }

    // ============= GESTION DES TH√àMES =============
    function changeTheme(themeName) {
      document.body.classList.remove('theme-violet', 'theme-white', 'theme-dark', 'theme-red', 'theme-green', 'theme-blue');
      document.body.classList.add(`theme-${themeName}`);
      
      config.theme = themeName;
      saveConfig();
      
      initParticles();
      showNotification(`üé® Th√®me ${themeName.charAt(0).toUpperCase() + themeName.slice(1)} appliqu√©!`, 'success');
    }

    // ============= DRAG & DROP =============
    function setupDragAndDrop() {
      const draggableElements = [
        document.getElementById('fps-overlay'),
        document.getElementById('top3-overlay'),
        document.getElementById('speedrun-timer-overlay')
      ];
      
      draggableElements.forEach(element => {
        if (!element) return;
        
        element.addEventListener('mousedown', startDrag);
        element.addEventListener('touchstart', startDragTouch, { passive: false });
      });
      
      document.addEventListener('mousemove', drag);
      document.addEventListener('touchmove', dragTouch, { passive: false });
      document.addEventListener('mouseup', stopDrag);
      document.addEventListener('touchend', stopDrag);
    }
    
    function startDrag(e) {
      isDragging = true;
      currentDraggedElement = e.target;
      
      const rect = currentDraggedElement.getBoundingClientRect();
      dragOffset.x = e.clientX - rect.left;
      dragOffset.y = e.clientY - rect.top;
      
      currentDraggedElement.style.opacity = '0.7';
      e.preventDefault();
    }
    
    function startDragTouch(e) {
      if (e.touches.length !== 1) return;
      
      isDragging = true;
      currentDraggedElement = e.target;
      
      const rect = currentDraggedElement.getBoundingClientRect();
      dragOffset.x = e.touches[0].clientX - rect.left;
      dragOffset.y = e.touches[0].clientY - rect.top;
      
      currentDraggedElement.style.opacity = '0.7';
      e.preventDefault();
    }
    
    function drag(e) {
      if (!isDragging || !currentDraggedElement) return;
      
      const x = e.clientX - dragOffset.x;
      const y = e.clientY - dragOffset.y;
      
      currentDraggedElement.style.left = `${x}px`;
      currentDraggedElement.style.top = `${y}px`;
      currentDraggedElement.style.right = 'auto';
      currentDraggedElement.style.bottom = 'auto';
      
      saveOverlayPosition(currentDraggedElement.id, { left: `${x}px`, top: `${y}px` });
    }
    
    function dragTouch(e) {
      if (!isDragging || !currentDraggedElement || e.touches.length !== 1) return;
      
      const x = e.touches[0].clientX - dragOffset.x;
      const y = e.touches[0].clientY - dragOffset.y;
      
      currentDraggedElement.style.left = `${x}px`;
      currentDraggedElement.style.top = `${y}px`;
      currentDraggedElement.style.right = 'auto';
      currentDraggedElement.style.bottom = 'auto';
      
      saveOverlayPosition(currentDraggedElement.id, { left: `${x}px`, top: `${y}px` });
      
      e.preventDefault();
    }
    
    function stopDrag() {
      if (!isDragging || !currentDraggedElement) return;
      
      currentDraggedElement.style.opacity = '';
      isDragging = false;
      currentDraggedElement = null;
    }
    
    function saveOverlayPosition(id, position) {
      const overlayKey = id.replace('-overlay', '');
      config.overlayPositions[overlayKey] = position;
      saveConfig();
    }
    
    function applyOverlayPositions() {
      Object.keys(config.overlayPositions).forEach(key => {
        const element = document.getElementById(`${key}-overlay`);
        if (element && config.overlayPositions[key]) {
          Object.assign(element.style, config.overlayPositions[key]);
        }
      });
    }

    // ============= MODAL DE CONFIGURATION CORRIG√â =============
    function openSettingsModal() {
      console.log('üîß Ouverture des param√®tres...');
      
      const existingModal = document.getElementById('mynvo-settings');
      if (existingModal) {
        existingModal.remove();
        return;
      }

      const modal = document.createElement('div');
      modal.id = 'mynvo-settings';
      modal.className = 'mynvo-modal';
      modal.innerHTML = `
        <h3 style="color:var(--primary);margin-bottom:10px;text-align:center;">üéÆ Configuration Compl√®te MYNVO</h3>
        
        <div class="settings-tabs">
          <div class="settings-tab active" data-tab="keys">Touches</div>
          <div class="settings-tab" data-tab="timer">Timer</div>
          <div class="settings-tab" data-tab="display">Affichage</div>
          <div class="settings-tab" data-tab="themes">Th√®mes</div>
          <div class="settings-tab" data-tab="game">Jeu</div>
        </div>
        
        <!-- Onglet Touches -->
        <div class="settings-tab-content active" id="keys-tab">
          <div class="settings-section">
            <h3>üéØ Touches de Jeu (ZQSD)</h3>
            <div class="mynvo-row">
              <div class="mynvo-label">Haut</div>
              <div class="key-display" data-key="up">${config.customKeys.up.toUpperCase()}</div>
            </div>
            <div class="mynvo-row">
              <div class="mynvo-label">Bas</div>
              <div class="key-display" data-key="down">${config.customKeys.down.toUpperCase()}</div>
            </div>
            <div class="mynvo-row">
              <div class="mynvo-label">Gauche</div>
              <div class="key-display" data-key="left">${config.customKeys.left.toUpperCase()}</div>
            </div>
            <div class="mynvo-row">
              <div class="mynvo-label">Droite</div>
              <div class="key-display" data-key="right">${config.customKeys.right.toUpperCase()}</div>
            </div>
            <div class="mynvo-row">
              <div class="mynvo-label">Hoverboard</div>
              <div class="key-display" data-key="hoverboard">${config.customKeys.hoverboard === ' ' ? 'ESPACE' : config.customKeys.hoverboard.toUpperCase()}</div>
            </div>
          </div>
        </div>
        
        <!-- Onglet Timer -->
        <div class="settings-tab-content" id="timer-tab">
          <div class="settings-section">
            <h3>‚è±Ô∏è Configuration du Timer</h3>
            <div class="mynvo-row">
              <div class="mynvo-label">D√©marrer</div>
              <div class="key-display" data-key="timerStartKey">${getKeyDisplayName(config.timerStartKey)}</div>
            </div>
            <div class="mynvo-row">
              <div class="mynvo-label">Pause</div>
              <div class="key-display" data-key="timerPauseKey">${getKeyDisplayName(config.timerPauseKey)}</div>
            </div>
            <div class="mynvo-row">
              <div class="mynvo-label">Reset</div>
              <div class="key-display" data-key="timerResetKey">${getKeyDisplayName(config.timerResetKey)}</div>
            </div>
          </div>
        </div>
        
        <!-- Onglet Affichage -->
        <div class="settings-tab-content" id="display-tab">
          <div class="settings-section">
            <h3>üëÅÔ∏è √âl√©ments d'affichage</h3>
            <div class="mynvo-row">
              <div class="mynvo-label">Afficher FPS</div>
              <label class="toggle-switch">
                <input type="checkbox" id="show-fps" ${config.showFPS ? 'checked' : ''}>
                <span class="toggle-slider"></span>
              </label>
            </div>
            <div class="mynvo-row">
              <div class="mynvo-label">Afficher TOP 3</div>
              <label class="toggle-switch">
                <input type="checkbox" id="show-top3" ${config.showTop3 ? 'checked' : ''}>
                <span class="toggle-slider"></span>
              </label>
            </div>
            <div class="mynvo-row">
              <div class="mynvo-label">Afficher Timer</div>
              <label class="toggle-switch">
                <input type="checkbox" id="show-timer" ${config.showTimer ? 'checked' : ''}>
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
        </div>
        
        <!-- Onglet Th√®mes -->
        <div class="settings-tab-content" id="themes-tab">
          <div class="settings-section">
            <h3>üé® Th√®mes du site</h3>
            <p style="margin-bottom: 15px; color: var(--text-muted);">Choisissez un th√®me pour personnaliser l'apparence :</p>
            
            <div class="theme-options">
              <div class="theme-option violet ${config.theme === 'violet' ? 'active' : ''}" onclick="changeTheme('violet')">
                Violet
              </div>
              <div class="theme-option white ${config.theme === 'white' ? 'active' : ''}" onclick="changeTheme('white')">
                Blanc
              </div>
              <div class="theme-option dark ${config.theme === 'dark' ? 'active' : ''}" onclick="changeTheme('dark')">
                Sombre
              </div>
              <div class="theme-option red ${config.theme === 'red' ? 'active' : ''}" onclick="changeTheme('red')">
                Rouge
              </div>
              <div class="theme-option green ${config.theme === 'green' ? 'active' : ''}" onclick="changeTheme('green')">
                Vert
              </div>
              <div class="theme-option blue ${config.theme === 'blue' ? 'active' : ''}" onclick="changeTheme('blue')">
                Bleu
              </div>
            </div>
          </div>
        </div>
        
        <!-- Onglet Jeu -->
        <div class="settings-tab-content" id="game-tab">
          <div class="settings-section">
            <h3>üéÆ Options de jeu</h3>
            <div class="mynvo-row">
              <button class="quick-btn give-piece-btn" onclick="unlockAllCharacters();" style="width:100%;">üîì D√©bloquer Tous les Personnages + Pi√®ces</button>
            </div>
          </div>
        </div>

        <div style="text-align:center;margin-top:12px;">
          <button onclick="closeSettingsModal()" style="background:var(--primary);color:#fff;padding:10px 20px;border:none;border-radius:8px;cursor:pointer;font-weight:700;">Fermer</button>
        </div>
      `;
      
      document.body.appendChild(modal);
      initSettingsTabs();
      initSettingsEventListeners();
      
      modal.querySelectorAll('.key-display').forEach(display => {
        display.addEventListener('click', function() {
          startKeySetting(this.dataset.key);
        });
      });
    }

    function initSettingsTabs() {
      const tabs = document.querySelectorAll('.settings-tab');
      const contents = document.querySelectorAll('.settings-tab-content');
      
      tabs.forEach(tab => {
        tab.addEventListener('click', function() {
          const tabId = this.dataset.tab;
          
          tabs.forEach(t => t.classList.remove('active'));
          contents.forEach(c => c.classList.remove('active'));
          
          this.classList.add('active');
          document.getElementById(`${tabId}-tab`).classList.add('active');
        });
      });
    }

    function initSettingsEventListeners() {
      document.getElementById('show-fps')?.addEventListener('change', function() {
        config.showFPS = this.checked;
        saveConfig();
        applyOverlaysFromConfig();
      });
      
      document.getElementById('show-top3')?.addEventListener('change', function() {
        config.showTop3 = this.checked;
        saveConfig();
        applyOverlaysFromConfig();
      });
      
      document.getElementById('show-timer')?.addEventListener('change', function() {
        config.showTimer = this.checked;
        saveConfig();
        applyOverlaysFromConfig();
      });
    }

    function startKeySetting(keyType) {
      isSettingKey = true;
      currentKeySetting = keyType;
      
      const display = document.querySelector(`#mynvo-settings .key-display[data-key="${keyType}"]`);
      display.textContent = '...';
      display.classList.add('active');
      
      showNotification(`Appuyez sur une touche pour ${keyType}...`, 'info');
      
      const keyListener = function(e) {
        e.preventDefault();
        e.stopPropagation();
        
        let keyValue = e.key.toLowerCase();
        let displayValue = e.key.toUpperCase();
        
        if (e.code === 'Space') {
          keyValue = ' ';
          displayValue = 'ESPACE';
        }
        
        if (keyType.startsWith('timer')) {
          config[keyType] = keyValue;
        } else {
          config.customKeys[keyType] = keyValue;
        }
        
        display.textContent = displayValue;
        display.classList.remove('active');
        
        saveConfig();
        document.removeEventListener('keydown', keyListener);
        isSettingKey = false;
        currentKeySetting = null;
        
        showNotification(`‚úÖ Touche ${keyType} d√©finie sur: ${displayValue}`, 'success');
        setupZQSDSystem();
        setupTimerSystem();
      };
      
      document.addEventListener('keydown', keyListener, { once: true });
    }

    function getKeyDisplayName(keyCode) {
      const keyNames = {
        'Control': 'CTRL',
        'Shift': 'SHIFT',
        'Alt': 'ALT',
        'Meta': 'META',
        ' ': 'ESPACE',
        'Space': 'ESPACE',
        'Enter': 'ENTR√âE',
        'Tab': 'TAB',
        'Escape': 'ESC'
      };
      return keyNames[keyCode] || keyCode.toUpperCase();
    }

    function closeSettingsModal() {
      const modal = document.getElementById('mynvo-settings');
      if (modal) modal.remove();
      isSettingKey = false;
      currentKeySetting = null;
    }

    // ============= NOTIFICATIONS =============
    function showNotification(message, type = "info", multiline = false) {
      const notification = document.createElement('div');
      notification.className = 'notification' + (multiline ? ' multiline' : '');
      notification.innerHTML = `<span>${message}</span>`;
      
      if (type === "error") {
        notification.style.borderLeftColor = "var(--danger)";
      } else if (type === "success") {
        notification.style.borderLeftColor = "var(--success)";
      } else if (type === "warning") {
        notification.style.borderLeftColor = "var(--warning)";
      }
      
      document.body.appendChild(notification);
      
      setTimeout(() => notification.classList.add('show'), 10);
      setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => notification.remove(), 300);
      }, multiline ? 5000 : 3000);
    }

    // ============= PARTICULES =============
    function initParticles() {
      const container = document.getElementById('particles-container');
      container.innerHTML = '';
      const particleCount = 30;
      
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        
        const size = Math.random() * 5 + 2;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.left = `${Math.random() * 100}%`;
        particle.style.top = `${Math.random() * 100}%`;
        particle.style.animationDuration = `${Math.random() * 20 + 10}s`;
        particle.style.animationDelay = `${Math.random() * 5}s`;
        
        container.appendChild(particle);
      }
    }

    // ============= CONFIGURATION =============
    function saveConfig() {
      localStorage.setItem("mynvoConfig", JSON.stringify(config));
    }

    function loadConfig() {
      try {
        const saved = localStorage.getItem("mynvoConfig");
        if (saved) {
          const savedConfig = JSON.parse(saved);
          config = { ...config, ...savedConfig };
          
          if (savedConfig.customKeys) {
            config.customKeys = { ...config.customKeys, ...savedConfig.customKeys };
          }
          
          if (savedConfig.theme) {
            changeTheme(savedConfig.theme);
          } else {
            changeTheme('violet');
          }
        } else {
          changeTheme('violet');
        }
      } catch(e) {
        console.warn('Configuration corrompue, r√©initialisation...');
        changeTheme('violet');
        localStorage.removeItem("mynvoConfig");
      }
    }

    function applyOverlaysFromConfig() {
      document.getElementById('fps-overlay').style.display = config.showFPS ? 'block' : 'none';
      document.getElementById('top3-overlay').style.display = config.showTop3 ? 'block' : 'none';
      document.getElementById('speedrun-timer-overlay').style.display = config.showTimer ? 'block' : 'none';
      timerVisible = config.showTimer;
      
      applyOverlayPositions();
    }

    // ============= INITIALISATION COMPL√àTE =============
    function initializeExtensionFeatures() {
      console.log('üöÄ Initialisation des fonctionnalit√©s MYNVO...');
      
      loadConfig();
      applyOverlaysFromConfig();
      setupZQSDSystem();
      setupTimerSystem();
      setupDragAndDrop();
      
      console.log('‚úÖ Tous les syst√®mes activ√©s!');
    }

    // ============= √âV√âNEMENTS AU CHARGEMENT =============
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üìÑ DOM charg√©, initialisation MYNVO...');
      
      initParticles();
      loadConfig();
      applyOverlaysFromConfig();
      
      // √âv√©nements des boutons
      document.getElementById('settings-link').addEventListener('click', openSettingsModal);
      document.getElementById('play-link').addEventListener('click', () => {
        document.querySelector('.game-container')?.scrollIntoView({ behavior: 'smooth', block: 'center' });
        iframe.focus();
      });
      
      document.getElementById('fs-btn').addEventListener('click', toggleFullscreen);
      document.getElementById('settings-quick-btn').addEventListener('click', openSettingsModal);
      document.getElementById('timer-quick-btn').addEventListener('click', toggleTimerVisibility);
      document.getElementById('fps-quick-btn').addEventListener('click', toggleFPS);
      document.getElementById('fullscreen-quick-btn').addEventListener('click', toggleFullscreen);
      document.getElementById('top3-quick-btn').addEventListener('click', toggleTop3);
      document.getElementById('unlock-all-btn').addEventListener('click', unlockAllCharacters);
      document.getElementById('close-bottom-menu').addEventListener('click', function() {
        document.getElementById('bottom-menu').classList.remove('visible');
      });
      
      // Menu contextuel
      document.addEventListener('contextmenu', function(e) {
        e.preventDefault();
        document.getElementById('bottom-menu').classList.toggle('visible');
      });
      
      console.log('‚úÖ MYNVO initialis√© avec succ√®s!');
    });

    // ============= LOGS DE D√âMARRAGE =============
    console.log('%c‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó', 'color: #7c62dc; font-weight: bold;');
    console.log('%c‚ïë  SUBWAY SURFERS 2025 - √âDITION MYNVO  ‚ïë', 'color: #7c62dc; font-weight: bold;');
    console.log('%c‚ïë  Syst√®me Int√©gr√© v5.0 - CORRIG√â      ‚ïë', 'color: #7c62dc; font-weight: bold;');
    console.log('%c‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù', 'color: #7c62dc; font-weight: bold;');
    console.log('');
    console.log('%cüéÆ Touches ZQSD activ√©es:', 'color: #00cc66; font-weight: bold;');
    console.log('   ‚Ä¢ Z = Haut | Q = Gauche | S = Bas | D = Droite');
    console.log('   ‚Ä¢ ESPACE = Hoverboard');
    console.log('');
    console.log('%c‚öôÔ∏è Fonctionnalit√©s activ√©es:', 'color: #7c62dc; font-weight: bold;');
    console.log('   ‚Ä¢ Param√®tres complets fonctionnels');
    console.log('   ‚Ä¢ Th√®me violet par d√©faut');
    console.log('   ‚Ä¢ D√©blocage complet (pi√®ces + personnages)');
    console.log('   ‚Ä¢ Timer speedrun avec touches T/ESPACE/R');
    console.log('   ‚Ä¢ FPS Counter en temps r√©el');
    console.log('');
    console.log('%cüí° Astuce:', 'color: #ffaa00; font-weight: bold;');
    console.log('   Clic droit pour le menu rapide!');
    console.log('');
  </script>
</body>
</html>
